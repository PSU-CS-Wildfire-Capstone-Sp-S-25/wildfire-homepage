<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title></title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="WRF-SFIRE Simulation Guide with WRFxPy
This guide outlines the complete process for creating and running wildfire simulations using wrfxpy with wrf-sfire.
Prerequisites
1. Create Spack Package for WRF-SFIRE
First, you&rsquo;ll need the custom spack package for wrf-sfire:

Repository: wrf-sfire spack package

2. Install Required Packages with Spack
Install the necessary spack packages:
# Install wrf-sfire spack package
spack install wrf-sfire

# Install WPS (WRF Preprocessing System)
spack install wps
3. Install wrfxpy
Install the forked version of wrfxpy:">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.efe4d852f731d5d1fbb87718387202a97aafd768cdcdaed0662bbe6982e91824.css" >



  
    <link rel="stylesheet" href="/css/custom.css">
  


    


    
      

    

    

    
      <link rel="canonical" href="https://yourwebsite.com/dynamical-methods/">
    

    <meta property="og:url" content="https://yourwebsite.com/dynamical-methods/">
  <meta property="og:description" content="WRF-SFIRE Simulation Guide with WRFxPy This guide outlines the complete process for creating and running wildfire simulations using wrfxpy with wrf-sfire.
Prerequisites 1. Create Spack Package for WRF-SFIRE First, you’ll need the custom spack package for wrf-sfire:
Repository: wrf-sfire spack package 2. Install Required Packages with Spack Install the necessary spack packages:
# Install wrf-sfire spack package spack install wrf-sfire # Install WPS (WRF Preprocessing System) spack install wps 3. Install wrfxpy Install the forked version of wrfxpy:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">

  <meta itemprop="description" content="WRF-SFIRE Simulation Guide with WRFxPy This guide outlines the complete process for creating and running wildfire simulations using wrfxpy with wrf-sfire.
Prerequisites 1. Create Spack Package for WRF-SFIRE First, you’ll need the custom spack package for wrf-sfire:
Repository: wrf-sfire spack package 2. Install Required Packages with Spack Install the necessary spack packages:
# Install wrf-sfire spack package spack install wrf-sfire # Install WPS (WRF Preprocessing System) spack install wps 3. Install wrfxpy Install the forked version of wrfxpy:">
  <meta itemprop="wordCount" content="904">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:description" content="WRF-SFIRE Simulation Guide with WRFxPy This guide outlines the complete process for creating and running wildfire simulations using wrfxpy with wrf-sfire.
Prerequisites 1. Create Spack Package for WRF-SFIRE First, you’ll need the custom spack package for wrf-sfire:
Repository: wrf-sfire spack package 2. Install Required Packages with Spack Install the necessary spack packages:
# Install wrf-sfire spack package spack install wrf-sfire # Install WPS (WRF Preprocessing System) spack install wps 3. Install wrfxpy Install the forked version of wrfxpy:">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    

  <header class="cover bg-top" style="background-image: url('/Wildfires.jpeg'); position: relative;">
    <div class="bg-black-60" style="position: relative;">

      
      <a href="/"
         style="position: absolute; top: 1rem; left: 1rem; z-index: 10; display: flex; flex-direction: column; align-items: center; text-decoration: none; background: transparent;">
        <img src="/fire.gif" alt="Fire GIF"
             style="height: 40px; width: auto; background-color: transparent;" />
        <span style="color: white; font-weight: 700; font-size: 1.2rem; line-height: 1.2; font-family: serif; margin-top: 0.25rem; user-select: none;">
          Wildfire Lab
        </span>
      </a>

      <nav class="site-nav pv3 ph3 ph4-ns" role="navigation">
  <div class="nav-inner flex-l center items-center justify-between">
    <a href="/" class="nav-brand f3 fw2 hover-white white-90 dib no-underline">
      
        
      
    </a>
    <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-menu">
      <span class="sr-only">Toggle menu</span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>
    <div class="nav-menu flex-l items-center" id="primary-menu">
      

      
        <ul class="nav-links pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/" title="Project Description page">
              Project Description
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/team/" title="Team Members page">
              Team Members
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/wildfire-twin/" title="Climate Models Overview page">
              Climate Models Overview
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 has-children">
            <a class="hover-white white-90 no-underline" href="/dynamic-site/" title="Wildfire Simulations page">
              Wildfire Simulations
            </a>
            
            <ul class="submenu">
              
              <li class="list f6 fw5 db" style="margin:0;">
                <a class="no-underline" href="/dynamic-site/ignition-portal/" style="display:block; padding:8px 14px; color:#222b5c;">
                  Ignition Request Portal (Concept UI)
                </a>
              </li>
              
            </ul>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/dynamical-methods/" title="WRF &#43; SFIRE Methods page">
              WRF &#43; SFIRE Methods
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/ai-methods/" title="FourCastNet Methods page">
              FourCastNet Methods
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/model-update/" title="Model Update page">
              Model Update
            </a>
            
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3 ">
            <a class="hover-white white-90 no-underline" href="/sources/" title="Sources page">
              Sources
            </a>
            
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>
<script>
  (function () {
    var nav = document.querySelector(".site-nav");
    if (!nav) return;
    var toggle = nav.querySelector(".nav-toggle");
    var menu = nav.querySelector("#primary-menu");
    if (!toggle || !menu) return;

    
    toggle.addEventListener("click", function () {
      var isOpen = nav.classList.toggle("is-open");
      toggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
    });

    
    menu.addEventListener("click", function (event) {
      var link = event.target.closest("a");
      
      if (!link) return;
      var parentLi = link.closest("li");
      if (parentLi && parentLi.classList.contains("has-children") && link === parentLi.querySelector(":scope > a")) {
        return; 
      }
      if (window.innerWidth <= 840) {
        nav.classList.remove("is-open");
        toggle.setAttribute("aria-expanded", "false");
      }
    });

    
    var hasChildrenItems = nav.querySelectorAll(".has-children");
    hasChildrenItems.forEach(function (item) {
      var submenu = item.querySelector(".submenu");
      if (!submenu) return;

      item.addEventListener("mouseenter", function () {
        if (window.innerWidth > 840) {
          submenu.style.display = "block";
        }
      });
      item.addEventListener("mouseleave", function () {
        if (window.innerWidth > 840) {
          submenu.style.display = "none";
        }
      });
    });

    
    document.addEventListener("click", function (e) {
      if (window.innerWidth > 840 && !nav.contains(e.target)) {
        hasChildrenItems.forEach(function (item) {
          var submenu = item.querySelector(".submenu");
          if (submenu) submenu.style.display = "none";
        });
      }
    });
  })();
</script>


      
      <div class="tc-l pv2 pv3-l ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw7 white-90 mb0 lh-title sans-serif">
          
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
<article class="article-content">
  <header class="article-header">
    <h1></h1>
    
  </header>

  <section class="article-body">
    <h1 id="wrf-sfire-simulation-guide-with-wrfxpy">WRF-SFIRE Simulation Guide with WRFxPy</h1>
<p>This guide outlines the complete process for creating and running wildfire simulations using wrfxpy with wrf-sfire.</p>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="1-create-spack-package-for-wrf-sfire">1. Create Spack Package for WRF-SFIRE</h3>
<p>First, you&rsquo;ll need the custom spack package for wrf-sfire:</p>
<ul>
<li><strong>Repository</strong>: <a href="https://github.com/PSU-CS-Wildfire-Capstone-Sp-S-25/wf-capstone-docker/blob/main/package.py">wrf-sfire spack package</a></li>
</ul>
<h3 id="2-install-required-packages-with-spack">2. Install Required Packages with Spack</h3>
<p>Install the necessary spack packages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Install wrf-sfire spack package</span>
</span></span><span style="display:flex;"><span>spack install wrf-sfire
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Install WPS (WRF Preprocessing System)</span>
</span></span><span style="display:flex;"><span>spack install wps
</span></span></code></pre></div><h3 id="3-install-wrfxpy">3. Install wrfxpy</h3>
<p>Install the forked version of wrfxpy:</p>
<ul>
<li><strong>Repository</strong>: <a href="https://github.com/PSU-CS-Wildfire-Capstone-Sp-S-25/wrfxpy">wrfxpy fork</a></li>
<li><strong>Installation Documentation</strong>: <a href="https://wiki.openwfm.org/wiki/Running_WRF-SFIRE_with_real_data_in_the_WRFx_system#WRFx_system">Running WRF-SFIRE with real data in the WRFx system</a></li>
</ul>
<p>Follow the installation instructions in the documentation to properly set up wrfxpy on your system.</p>
<h2 id="simulation-creation-process">Simulation Creation Process</h2>
<h3 id="step-1-research-phase">Step 1: Research Phase</h3>
<p>Before creating any simulation, you need to gather essential fire data:</p>
<h4 id="required-information">Required Information</h4>
<ul>
<li><strong>Fire Location</strong>: Geographic coordinates or area boundaries</li>
<li><strong>Start Time</strong>: When the fire began</li>
<li><strong>Duration</strong>: How long the fire burned</li>
<li><strong>Fire Size</strong>: Maximum area covered by the fire</li>
</ul>
<h3 id="step-2-convert-research-to-job-json">Step 2: Convert Research to Job JSON</h3>
<p>Tool for helping configure domains: <a href="https://jiririchter.github.io/WRFDomainWizard/">WRFDomainWizard</a></p>
<p>Documentation can be found here for more information on the keys used in the wrfxpy job json files: <a href="https://wrfxpy.readthedocs.io/en/latest/forecasting.html">wrfxpy docs</a></p>
<h4 id="job-json-example">Job JSON Example</h4>
<p>Palisades Fire Jan 2025 Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;wps_namelist_path&#34;</span>: <span style="color:#e6db74">&#34;/path/to/default.wps&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;wrf_namelist_path&#34;</span>: <span style="color:#e6db74">&#34;/path/to/default.input&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;fire_namelist_path&#34;</span>: <span style="color:#e6db74">&#34;/path/to/default.fire&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;emissions_namelist_path&#34;</span>: <span style="color:#e6db74">&#34;/path/to/default.fire_emissions&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;wps_geog_path&#34;</span>: <span style="color:#e6db74">&#34;/path/to/WPS_GEOG&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;job_id&#34;</span>: <span style="color:#e6db74">&#34;&lt;job_name&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;wall_time_hrs&#34;</span>: <span style="color:#ae81ff">96</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;grib_source&#34;</span>: <span style="color:#e6db74">&#34;GFSA&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;start_utc&#34;</span>: <span style="color:#e6db74">&#34;2025-01-06_12:00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;end_utc&#34;</span>: <span style="color:#e6db74">&#34;2025-01-11_12:00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;qsys&#34;</span>:<span style="color:#e6db74">&#34;ORCA_SFIRE&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;num_nodes&#34;</span>: <span style="color:#ae81ff">9</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ppn&#34;</span>: <span style="color:#ae81ff">9</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;postproc&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;1&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;3&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;FIRE_AREA&#34;</span>,<span style="color:#e6db74">&#34;FGRNHFX&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;2&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;palisades fire with smaller cell size and more accurate trulat&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;grid_code&#34;</span>: <span style="color:#e6db74">&#34;&lt;job_name&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;domains&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cell_size&#34;</span>: [<span style="color:#ae81ff">2000</span>,<span style="color:#ae81ff">2000</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;truelats&#34;</span>: [<span style="color:#ae81ff">34.568</span>,<span style="color:#ae81ff">34.568</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;stand_lon&#34;</span>: <span style="color:#ae81ff">-128.617</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;center_latlon&#34;</span>: [<span style="color:#ae81ff">34.0733</span>,<span style="color:#ae81ff">-118.5439</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">60</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;domain_size&#34;</span>: [<span style="color:#ae81ff">97</span>,<span style="color:#ae81ff">97</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;time_step&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;interval_seconds&#34;</span>: <span style="color:#ae81ff">3600</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;2&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_time_step_ratio&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_start&#34;</span>: [<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">33</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_end&#34;</span>: [<span style="color:#ae81ff">64</span>,<span style="color:#ae81ff">64</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_cell_size_ratio&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;3&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_time_step_ratio&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_start&#34;</span>: [<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">33</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_id&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">15</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_end&#34;</span>: [<span style="color:#ae81ff">64</span>,<span style="color:#ae81ff">64</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_cell_size_ratio&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ignitions&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;3&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;time_utc&#34;</span>: <span style="color:#e6db74">&#34;2025-01-07_17:00:00&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;latlon&#34;</span>: [<span style="color:#ae81ff">34.0733</span>,<span style="color:#ae81ff">-118.5439</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;duration_s&#34;</span>: <span style="color:#ae81ff">240</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="breaking-down-the-example">Breaking Down The Example</h4>
<h5 id="paths-to-files">Paths To Files</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;wps_namelist_path&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;/path/to/default.wps&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;wrf_namelist_path&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;/path/to/default.input&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;fire_namelist_path&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;/path/to/default.fire&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;emissions_namelist_path&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;/path/to/default.fire_emissions&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;wps_geog_path&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;/path/to/WPS_GEOG&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><p>For those first 4 options typically you would put the path to the default options in <a href="https://github.com/openwfm/wrfxpy/tree/master/etc/nlists">wrfxpy/etc/nlists/</a>. While the last one is the path to the directory that contains your static data for WPS as shown <a href="https://wiki.openwfm.org/wiki/Running_WRF-SFIRE_with_real_data_in_the_WRFx_system#Get_WPS_static_data">here</a>.</p>
<h5 id="job-configuration">Job Configuration</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;wall_time_hrs&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">96</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;grib_source&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;GFSA&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;start_utc&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;2025-01-06_12:00:00&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;end_utc&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;2025-01-11_12:00:00&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;qsys&#34;</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#e6db74">&#34;ORCA_SFIRE&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;num_nodes&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">9</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;ppn&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">9</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><p>These are variables that will be  used in the sbatch job wrfxpy creates and runs for you.</p>
<ul>
<li><strong>wall_time_hrs</strong>: This will be the time limit for the sbatch job when the simulation runs</li>
<li><strong>grib_source</strong>: The source which you will get your weather observations from. Valid options being HRRR, NAM, NAM227, NARR, CFSR, GFSA, and GFSF</li>
<li><strong>start_utc</strong>: The start time for the simulation</li>
<li><strong>end_utc</strong>: The end time for the simulation</li>
<li><strong>qsys</strong>: The sbatch template to use</li>
<li><strong>num_nodes</strong>: Number of nodes to use in the simulation</li>
<li><strong>ppn</strong>: Number of processors to use per node in the simulation</li>
</ul>
<h5 id="job-post-processing">Job Post Processing</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;postproc&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;1&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;3&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;FIRE_AREA&#34;</span>,<span style="color:#e6db74">&#34;FGRNHFX&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;2&#34;</span>: [<span style="color:#e6db74">&#34;T2&#34;</span>,<span style="color:#e6db74">&#34;PSFC&#34;</span>,<span style="color:#e6db74">&#34;WINDSPD&#34;</span>,<span style="color:#e6db74">&#34;WINDVEC&#34;</span>,<span style="color:#e6db74">&#34;SMOKE_INT&#34;</span>],
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Each numbered key above means perform post processing on these domains (1, 2, 3) and create these specified visualizations.</p>
<h5 id="simulation-domains">Simulation Domains</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;domains&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cell_size&#34;</span>: [<span style="color:#ae81ff">2000</span>,<span style="color:#ae81ff">2000</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;truelats&#34;</span>: [<span style="color:#ae81ff">34.568</span>,<span style="color:#ae81ff">34.568</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;stand_lon&#34;</span>: <span style="color:#ae81ff">-128.617</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;center_latlon&#34;</span>: [<span style="color:#ae81ff">34.0733</span>,<span style="color:#ae81ff">-118.5439</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">60</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;domain_size&#34;</span>: [<span style="color:#ae81ff">97</span>,<span style="color:#ae81ff">97</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;time_step&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;interval_seconds&#34;</span>: <span style="color:#ae81ff">3600</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;2&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_time_step_ratio&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_start&#34;</span>: [<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">33</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_end&#34;</span>: [<span style="color:#ae81ff">64</span>,<span style="color:#ae81ff">64</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_cell_size_ratio&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;3&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_time_step_ratio&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_start&#34;</span>: [<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">33</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;history_interval&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geog_res&#34;</span>: <span style="color:#e6db74">&#34;.3s&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_id&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;subgrid_ratio&#34;</span>: [<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">15</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_end&#34;</span>: [<span style="color:#ae81ff">64</span>,<span style="color:#ae81ff">64</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;parent_cell_size_ratio&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }<span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><p>Here each numbered key refers to the domain with the keys inside of them the configuration of that domain. For more information on the specific keys check the <a href="https://wrfxpy.readthedocs.io/en/latest/forecasting.html#domains">wrfxpy documentation</a></p>
<ul>
<li><strong>cell_size</strong>: The size in meters for each cell in the domain [x, y]</li>
<li><strong>trulats</strong>: The true latitudes of the LCC projection</li>
<li><strong>stanlon</strong>: The standard longitude of the LCC projection</li>
<li><strong>center_latlon</strong>: The center point</li>
<li><strong>history_interval</strong>: the history interval in minutes</li>
<li><strong>geog_res</strong>: The resolution of geographical/fuel data to use</li>
<li><strong>domain_size</strong>: The number of cells to use in the domain [x, y]</li>
<li><strong>subgrid_ratio</strong>: The refinement ratio for x and y direction for the fire grid, default is 1, 1</li>
<li><strong>time_step</strong>: Time step in seconds</li>
<li><strong>interval_seconds</strong>: How often to receive meteorological data from the pre-processing steps in seconds</li>
<li><strong>parent_time_step_ratio</strong>: The ratio of child time step to parent time step</li>
<li><strong>parent_start</strong>: The [x, y] coordinates of the parents domain which this domain starts</li>
<li><strong>parent_end</strong>: The [x, y] coordinates of the parents domain which this domain ends</li>
<li><strong>parent_id</strong>: The ID of the parent the current domain is nested in</li>
<li><strong>subgrid_ratio</strong>: The refinement ratio for x and y direction for the fire grid</li>
<li><strong>parent_cell_size_ratio</strong>: The ratio of the size of the child cell to the parent cell</li>
</ul>
<h5 id="ignitions">Ignitions</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;ignitions&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;3&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;time_utc&#34;</span>: <span style="color:#e6db74">&#34;2025-01-07_17:00:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;latlon&#34;</span>: [<span style="color:#ae81ff">34.0733</span>,<span style="color:#ae81ff">-118.5439</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;duration_s&#34;</span>: <span style="color:#ae81ff">240</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Much like for domains, the numbered keys here correspond to a domain that will run fire modeling.</p>
<ul>
<li><strong>time_utc</strong>: The time which the ignition will start</li>
<li><strong>latlon</strong>: The latitude and longitude of the ignition</li>
<li><strong>duration_s</strong>: The duration in seconds for the ignition</li>
</ul>
<h3 id="step-3-create-sbatch-script">Step 3: Create SBATCH Script</h3>
<p>Prepare a SLURM batch script for job submission:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#SBATCH --job-name=&lt;job_name&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --output=&lt;job_name&gt;.out</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --error=&lt;job_name&gt;.err</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --nodes=1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --ntasks=16</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --cpus-per-task=1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#sbatch --mem-per-cpu=3GB</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#SBATCH --time=96:00:00</span>
</span></span><span style="display:flex;"><span>unset SLURM_MEM_PER_NODE
</span></span><span style="display:flex;"><span>cd /path/to/wrfxpy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>./forecast.sh /path/to/&lt;job_file&gt;.json
</span></span></code></pre></div><h3 id="step-4-run-the-simulation">Step 4: Run the Simulation</h3>
<p>Submit your simulation job to the SLURM scheduler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sbatch /path/to/sbatch/script.sh
</span></span></code></pre></div><h2 id="resources">Resources</h2>
<ul>
<li><a href="https://wiki.openwfm.org/wiki/Running_WRF-SFIRE_with_real_data_in_the_WRFx_system#WRFx_system">WRFXPY Documentation</a></li>
<li><a href="https://wrfxpy.readthedocs.io/en/latest/forecasting.html">Additional WRFXPY Documentation</a></li>
<li><a href="https://wiki.openwfm.org/wiki/WRF-SFIRE">WRF-SFIRE Wiki</a></li>
<li><a href="https://slurm.schedmd.com/documentation.html">SLURM Documentation</a></li>
<li><a href="https://spack.readthedocs.io/en/latest/">SPACK Documentation</a></li>
<li><a href="https://jiririchter.github.io/WRFDomainWizard">WRF Domain Wizard</a></li>
</ul>

  </section>
</article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://yourwebsite.com/" >
    &copy;  Portland State University Wildfire Lab 2026 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
